<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dungeon Survivor</title>
    <link rel="stylesheet" href="style.css">

</head>

<body>
    <!-- Main Menu -->
    <div id="mainMenu" class="screen-container" style="background: linear-gradient(rgba(0,0,0,0.8), #1a1a1a);">
        <h1 style="font-size: 5em; margin-bottom: 50px; text-shadow: 0 0 20px black; color: gold;">Dungeon Survivor</h1>

        <button id="btnPlayNow" class="menu-btn">Play Now</button>
        <button id="btnBestiary" class="menu-btn">Bestiary</button>
        <button id="btnAbout" class="menu-btn">About</button>
    </div>

    <!-- About Screen -->
    <div id="aboutScreen" class="screen-container" style="display: none; background: #111;">
        <h1 style="color: #ccc; margin-bottom: 20px;">About</h1>
        <p style="font-size: 2em; margin-bottom: 50px; color: cyan; text-align: center;">Created by Nanzo</p>
        <button id="btnAboutBack" class="menu-btn">Back</button>
    </div>

    <!-- Selection Screen -->
    <div id="selectionScreen" class="screen-container"
        style="display: none; height: auto; min-height: 100%; position: relative;">
        <!-- Using ID selector for Grid rules in CSS -->
        <h1 style="grid-column: 1 / -1; text-align: center; margin-bottom: 20px; font-size: 3em;">Choose Your Hero</h1>

        <!-- Buttons sorted Alphabetically -->
        <button id="btnArcher" class="class-btn" style="border-color: #2E8B57;">Archer</button>
        <button id="btnAssassin" class="class-btn" style="border-color: #212121;">Assassin</button>
        <button id="btnBarbarian" class="class-btn" style="border-color: #E65100;">Barbarian</button>
        <button id="btnBard" class="class-btn" style="border-color: #9400D3; color: #EEE;">Bard</button>
        <button id="btnCleric" class="class-btn" style="border-color: #FFF; color: #EEE;">Cleric</button>
        <button id="btnDruid" class="class-btn" style="border-color: #556B2F; color: #EEE;">Druid</button>
        <!-- <button id="btnGod" class="class-btn" style="border-color: gold; color: gold; font-weight: bold;">GOD MODE</button> -->
        <button id="btnGunslinger" class="class-btn" style="border-color: #37474F;">Gunslinger</button>
        <button id="btnIceMage" class="class-btn" style="border-color: #00ACC1;">Ice Mage</button>
        <button id="btnLancer" class="class-btn" style="border-color: #008b8b;">Lancer</button>
        <button id="btnMage" class="class-btn" style="border-color: #4B0082;">Mage</button>
        <button id="btnMonk" class="class-btn" style="border-color: #FF8C00; color: #EEE;">Monk</button>
        <button id="btnNecromancer" class="class-btn" style="border-color: #2A0A3B; color: #EEE;">Necromancer</button>
        <button id="btnPaladin" class="class-btn" style="border-color: #C0C0C0; color: #EEE;">Paladin</button>
        <button id="btnWarlock" class="class-btn" style="border-color: #4B0082; color: #d8f;">Warlock</button>
        <button id="btnWarrior" class="class-btn">Warrior</button>
        <button id="btnSelectionBack" class="menu-btn"
            style="grid-column: 1 / -1; margin-top: 20px; background: #666; border-color: #888; width: 100%; max-width: 100%;">Back
            to Menu</button>
    </div>

    <!-- Bestiary Screen -->
    <div id="bestiaryScreen" class="screen-container" style="display: none; background: #1a1a1a; z-index: 2000;">

        <h1 style="color: gold; margin-bottom: 20px;">Bestiary</h1>

        <div class="bestiary-container">
            <!-- Left: List -->
            <div id="bestiaryList" class="bestiary-list">
                <!-- Items injected by JS -->
            </div>

            <!-- Right: Details -->
            <div id="bestiaryDetails" class="bestiary-details">
                <h2 style="color: #aaa; margin-top: 100px;">Select a Monster</h2>
            </div>
        </div>

        <button id="btnBestiaryBack" class="menu-btn" style="margin-top: 20px;">Back</button>
    </div>

    <!-- Class Preview Modal -->
    <div id="classPreviewModal" class="screen-container"
        style="display: none; background: rgba(0,0,0,0.95); z-index: 2000;">

        <div class="modal-content">

            <!-- Left: Portrait -->
            <div
                style="flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; border-right: 1px solid #444; padding-right: 20px;">
                <div id="cpIcon"
                    style="width: 128px; height: 128px; background: #111; border-radius: 50%; border: 4px solid #666; overflow: hidden; display: flex; align-items: center; justify-content: center;">
                </div>
                <h1 id="cpName"
                    style="margin-top: 15px; margin-bottom: 5px; color: gold; font-size: 2em; text-align: center;">
                    Warrior</h1>
                <div id="cpRole" style="color: #aaa; font-style: italic;">Tank / Melee</div>
            </div>

            <!-- Right: Stats & Desc -->
            <div style="flex: 2;">
                <p id="cpDesc" style="line-height: 1.6; color: #ddd; margin-bottom: 25px; min-height: 60px;">
                    Description goes here...
                </p>

                <div
                    style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 0.9em; margin-bottom: 25px;">
                    <h3 style="grid-column: span 2; border-bottom: 1px solid #444; margin-bottom: 5px; color: #ccc;">
                        Base Stats</h3>
                    <div>HP: <span id="cpHp" style="color:#f66">100</span></div>
                    <div>Defense: <span id="cpDef" style="color:#888">10</span></div>
                    <div>Move Speed: <span id="cpSpd" style="color:#6f6">5</span></div>
                    <div>Attack Range: <span id="cpRange" style="color:#ffa">150</span></div>

                    <h3
                        style="grid-column: span 2; border-bottom: 1px solid #444; margin-bottom: 5px; margin-top: 15px; color: #ccc;">
                        Combat Ability</h3>
                    <div>Damage: <span id="cpDmg" style="color:#f66">30</span></div>
                    <div>Cooldown: <span id="cpAtkSpd" style="color:#ffa">0.5s</span></div>
                    <div>Proj. Speed: <span id="cpProjSpd" style="color:#6ff">12</span></div>
                    <div>AOE Radius: <span id="cpAOE" style="color:#f6f">0</span></div>

                    <h3
                        style="grid-column: span 2; border-bottom: 1px solid #444; margin-bottom: 5px; margin-top: 15px; color: #ccc;">
                        Special Traits</h3>
                    <div id="cpSpecialStats" style="grid-column: span 2; display: flex; flex-wrap: wrap; gap: 10px;">
                        <!-- Injected by JS -->
                    </div>
                </div>

                <div style="display: flex; gap: 15px; justify-content: flex-end; flex-wrap: wrap;">
                    <button id="cpBackBtn"
                        style="padding: 10px 20px; background: #666; border: none; color: white; border-radius: 5px; cursor: pointer; flex: 1;">Back</button>
                    <button id="cpStartBtn"
                        style="padding: 10px 30px; background: #2E8B57; border: none; color: white; border-radius: 5px; cursor: pointer; font-weight: bold; font-size: 1.1em; flex: 2;">Start
                        Adventure</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Level Up Screen -->
    <div id="levelUpScreen" class="screen-container" style="display: none; background: rgba(0,0,0,0.8); z-index: 20;">
        <h1>Level Up!</h1>
        <h3>Choose an Upgrade</h3>
        <div id="upgradeCards"
            style="display: flex; gap: 20px; margin-top: 20px; flex-wrap: wrap; justify-content: center;">
            <!-- Cards injected by JS -->
        </div>
    </div>

    <!-- Game HUD -->
    <div id="gameHUD"
        style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 10;">
        <!-- Top Center: Time & DPS -->
        <div id="hudTopCenter"
            style="position: absolute; top: 20px; left: 50%; transform: translateX(-50%); text-align: center; pointer-events: none; z-index: 15; background: rgba(0,0,0,0.8); padding: 10px 20px; border-radius: 8px; border: 2px solid #555;">
            <div id="hudTimer"
                style="font-size: 2.5em; font-weight: bold; color: white; text-shadow: 0 0 5px black; font-family: monospace;">
                00:00</div>
            <div id="hudDPS"
                style="font-size: 1.2em; color: #ffeb3b; text-shadow: 0 0 3px black; margin-top: 5px; font-weight: bold;">
                DPS: 0</div>
        </div>

        <!-- Stats Panel -->
        <div id="statsPanel"
            style="position: absolute; top: 20px; left: 20px; background: rgba(0,0,0,0.8); padding: 15px; border-radius: 8px; color: white; border: 2px solid #555; pointer-events: none; min-width: 180px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">

            <h3
                style="margin: 0 0 10px 0; color: gold; border-bottom: 1px solid #444; padding-bottom: 5px; text-align: center;">
                Hero Stats</h3>

            <!-- Level Info -->
            <div style="margin-bottom: 10px; text-align: center;">
                <span style="color: #aaa;">Level </span><span id="hudLevel"
                    style="color: cyan; font-weight: bold; font-size: 1.2em;">1</span>
            </div>

            <div style="font-size: 0.85em; line-height: 1.5;">
                <!-- Common (White) -->
                <div style="margin-bottom: 5px;">
                    <div>Max Health: <span id="hudHp" style="float: right;">100/100</span></div>
                    <div>Attack Damage: <span id="hudAtk" style="float: right;">10</span></div>
                    <div>Defense: <span id="hudDef" style="float: right;">0</span></div>
                    <div>Movement Speed: <span id="hudSpd" style="float: right;">5</span></div>
                    <div>Attack Speed: <span id="hudAtkSpd" style="float: right;">0.5s</span></div>
                    <div>Projectile Speed: <span id="hudProjSpd" style="float: right;">12</span></div>
                </div>

                <hr style="border-color: #333; margin: 5px 0;">

                <!-- Uncommon (Green #8f8) -->
                <div style="margin-bottom: 5px;">
                    <div><span style="color: #8f8;">Attack Range:</span> <span id="hudRange"
                            style="float: right;">150</span></div>
                    <div><span style="color: #8f8;">Health Regen:</span> <span id="hudRegen"
                            style="float: right;">0/s</span></div>
                    <div><span style="color: #8f8;">Critical Rate:</span> <span id="hudCritRate"
                            style="float: right;">5%</span></div>
                    <div><span style="color: #8f8;">Critical Damage:</span> <span id="hudCritDmg"
                            style="float: right;">150%</span></div>
                    <div><span style="color: #8f8;">Poison Damage:</span> <span id="hudPoison"
                            style="float: right;">0</span></div>
                    <div><span style="color: #8f8;">Dmg Reduction:</span> <span id="hudBlock"
                            style="float: right;">0%</span></div>
                </div>

                <hr style="border-color: #333; margin: 5px 0;">

                <!-- Rare (Blue #66ccff) -->
                <div style="margin-bottom: 5px;">
                    <div><span style="color: #66ccff;">Area of Effect:</span> <span id="hudAOE"
                            style="float: right;">0</span></div>
                    <div><span style="color: #66ccff;">Knockback:</span> <span id="hudKB" style="float: right;">0</span>
                    </div>
                    <div><span style="color: #66ccff;">Slow Duration:</span> <span id="hudSlow"
                            style="float: right;">No</span></div>
                    <div><span style="color: #66ccff;">Life on Kill:</span> <span id="hudLoK"
                            style="float: right;">0</span></div>
                </div>

                <hr style="border-color: #333; margin: 5px 0;">

                <!-- Epic (Purple #cc99ff) -->
                <div style="margin-bottom: 5px;">
                    <div><span style="color: #cc99ff;">Ricochet Count:</span> <span id="hudRicochet"
                            style="float: right;">0</span></div>
                    <div><span style="color: #cc99ff;">Freeze Duration:</span> <span id="hudFreeze"
                            style="float: right;">No</span></div>
                </div>

                <hr style="border-color: #333; margin: 5px 0;">

                <!-- Legendary (Orange #ffd000) -->
                <div>
                    <div><span style="color: #ffd000;">Multishot:</span> <span id="hudMulti"
                            style="float: right;">1</span></div>
                    <div><span style="color: #ffd000;">Piercing:</span> <span id="hudPierce"
                            style="float: right;">No</span></div>
                    <div><span style="color: #ffd000;">Extra Strikes:</span> <span id="hudDbl"
                            style="float: right;">0</span></div>
                </div>

            </div>
        </div>

        <!-- Pause Button -->
        <button id="btnPause"
            style="position: absolute; top: 20px; right: 20px; width: 50px; height: 50px; background: rgba(0,0,0,0.6); border: 2px solid #666; color: white; border-radius: 8px; font-size: 24px; cursor: pointer; pointer-events: auto;">
            ‚è∏
        </button>

        <!-- Pause Menu Overlay -->
        <div id="pauseMenu" class="screen-container"
            style="display: none; background: rgba(0,0,0,0.85); z-index: 100; pointer-events: auto;">
            <h1 style="color: white; font-size: 4em; margin-bottom: 40px; text-shadow: 0 0 10px #000;">PAUSED</h1>

            <button id="btnResume" class="menu-btn" style="border-color: #4CAF50; color: #4CAF50;">Continue</button>
            <button id="btnForfeit" class="menu-btn" style="border-color: #a00; color: #ff6666;">Give Up / End
                Run</button>
        </div>

        <!-- XP Bar -->
        <div id="xpBarContainer"
            style="position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); width: 60%; height: 20px; background: #222; border: 2px solid #555; border-radius: 10px; overflow: hidden; pointer-events: auto;">
            <div id="xpBarFill"
                style="width: 0%; height: 100%; background: linear-gradient(90deg, #66f, #a0a0ff); transition: width 0.2s;">
            </div>
            <div id="xpText"
                style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; font-size: 0.8em; color: white; text-shadow: 1px 1px 2px black;">
                0 / 100 XP</div>
        </div>
    </div>

    <!-- Game Over Screen -->
    <div id="gameOverScreen" class="screen-container"
        style="display: none; background: linear-gradient(rgba(0,0,0,0.9), #200); z-index: 30; font-family: monospace;">
        <h1 style="color: red; font-size: 5em; margin-bottom: 20px; text-shadow: 0 0 10px black;">YOU DIED</h1>

        <div class="modal-content" style="display: block;">

            <!-- Hero Header -->
            <div
                style="display: flex; align-items: center; margin-bottom: 30px; border-bottom: 1px solid #444; padding-bottom: 15px; flex-wrap: wrap; justify-content: center; text-align: center;">
                <div id="goClassIcon" style="width: 80px; height: 80px; margin-right: 20px; margin-bottom: 10px;"></div>
                <div>
                    <h2 id="goClassName" style="margin: 0; color: white; font-size: 2.5em;">Warrior</h2>
                    <div style="font-size: 1.2em; color: #aaa;">Level <span id="goLevel" style="color: cyan;">1</span>
                    </div>
                </div>
                <!-- Pushed to right usually, but on mobile will wrap -->
                <div style="margin-left: auto; text-align: right; width: 100%; margin-top: 10px;">
                    <div style="font-size: 1.0em; color: #999;">Time Alive</div>
                    <div id="goTime" style="color: gold; font-size: 2em;">00:00</div>
                </div>
            </div>

            <!-- Stats Grid -->
            <div id="goFinalStats"
                style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 30px; font-size: 1.2em; color: #ddd;">
                <!-- Stats injected by JS -->
            </div>

            <hr style="border-color: #333; margin: 20px 0;">

            <h3 style="margin-bottom: 15px; color: #aaa; font-size: 1.5em; text-align: center;">Upgrades</h3>
            <div id="goUpgrades" style="display: flex; gap: 10px; flex-wrap: wrap; justify-content: center;">
                <!-- Upgrades List -->
            </div>
        </div>

        <button onclick="location.reload()" class="menu-btn"
            style="margin-top: 40px; background: #800; border-color: #a00;">Return to Menu</button>
    </div>
    <canvas id="gameCanvas" width="800" height="600"></canvas>
    <script type="module" src="js/game.js?v=12"></script>
</body>

</html>