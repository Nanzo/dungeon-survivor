<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dungeon Survivor</title>
    <link rel="stylesheet" href="style.css">
    <style>
        #selectionScreen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            z-index: 1000;
        }

        .class-btn {
            font-size: 24px;
            padding: 20px 40px;
            margin: 20px;
            cursor: pointer;
            background: #444;
            color: white;
            border: 2px solid #888;
            border-radius: 10px;
        }

        .class-btn:hover {
            background: #666;
        }
    </style>
</head>

<body>
    <div id="selectionScreen">
        <h1>Choose Your Hero</h1>
        <div>
            <button id="btnWarrior" class="class-btn">Warrior</button>
            <button id="btnMage" class="class-btn" style="border-color: #4B0082;">Mage</button>
            <button id="btnArcher" class="class-btn" style="border-color: #2E8B57;">Archer</button>
            <button id="btnAssassin" class="class-btn" style="border-color: #212121;">Assassin</button>
            <button id="btnBarbarian" class="class-btn" style="border-color: #E65100;">Barbarian</button>
            <button id="btnGunslinger" class="class-btn" style="border-color: #37474F;">Gunslinger</button>
            <button id="btnIceMage" class="class-btn" style="border-color: #00ACC1;">Ice Mage</button>
            <button id="btnCleric" class="class-btn" style="border-color: #FFF; color: #EEE;">Cleric</button>
            <button id="btnPaladin" class="class-btn" style="border-color: #C0C0C0; color: #EEE;">Paladin</button>
            <button id="btnBard" class="class-btn" style="border-color: #9400D3; color: #EEE;">Bard</button>
            <button id="btnMonk" class="class-btn" style="border-color: #FF8C00; color: #EEE;">Monk</button>
            <button id="btnNecromancer" class="class-btn"
                style="border-color: #2A0A3B; color: #EEE;">Necromancer</button>
            <button id="btnDruid" class="class-btn" style="border-color: #556B2F; color: #EEE;">Druid</button>
            <button id="btnWarlock" class="class-btn" style="border-color: #4B0082; color: #d8f;">Warlock</button>
            <button id="btnGod" class="class-btn" style="border-color: gold; color: gold; font-weight: bold;">GOD
                MODE</button>
        </div>
    </div>

    <!-- Class Preview Modal -->
    <div id="classPreviewModal"
        style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 2000; flex-direction: column; align-items: center; justify-content: center; color: white;">

        <div
            style="background: #222; padding: 40px; border-radius: 15px; border: 2px solid #555; width: 700px; display: flex; gap: 30px;">

            <!-- Left: Portrait -->
            <div
                style="flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; border-right: 1px solid #444; padding-right: 20px;">
                <div id="cpIcon"
                    style="width: 128px; height: 128px; background: #111; border-radius: 50%; border: 4px solid #666; overflow: hidden; display: flex; align-items: center; justify-content: center;">
                </div>
                <h1 id="cpName" style="margin-top: 15px; margin-bottom: 5px; color: gold; font-size: 2em;">Warrior</h1>
                <div id="cpRole" style="color: #aaa; font-style: italic;">Tank / Melee</div>
            </div>

            <!-- Right: Stats & Desc -->
            <div style="flex: 2;">
                <p id="cpDesc" style="line-height: 1.6; color: #ddd; margin-bottom: 25px; min-height: 60px;">
                    Description goes here...
                </p>

                <div
                    style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 0.9em; margin-bottom: 25px;">
                    <h3 style="grid-column: span 2; border-bottom: 1px solid #444; margin-bottom: 5px; color: #ccc;">
                        Base Stats</h3>
                    <div>HP: <span id="cpHp" style="color:#f66">100</span></div>
                    <div>Defense: <span id="cpDef" style="color:#888">10</span></div>
                    <div>Move Speed: <span id="cpSpd" style="color:#6f6">5</span></div>
                    <div>Attack Range: <span id="cpRange" style="color:#ffa">150</span></div>

                    <h3
                        style="grid-column: span 2; border-bottom: 1px solid #444; margin-bottom: 5px; margin-top: 15px; color: #ccc;">
                        Combat Ability</h3>
                    <div>Damage: <span id="cpDmg" style="color:#f66">30</span></div>
                    <div>Cooldown: <span id="cpAtkSpd" style="color:#ffa">0.5s</span></div>
                    <div>Proj. Speed: <span id="cpProjSpd" style="color:#6ff">12</span></div>
                    <div>AOE Radius: <span id="cpAOE" style="color:#f6f">0</span></div>

                    <h3
                        style="grid-column: span 2; border-bottom: 1px solid #444; margin-bottom: 5px; margin-top: 15px; color: #ccc;">
                        Special Traits</h3>
                    <div id="cpSpecialStats" style="grid-column: span 2; display: flex; flex-wrap: wrap; gap: 10px;">
                        <!-- Injected by JS -->
                    </div>
                </div>

                <div style="display: flex; gap: 15px; justify-content: flex-end;">
                    <button id="cpBackBtn"
                        style="padding: 10px 20px; background: #666; border: none; color: white; border-radius: 5px; cursor: pointer;">Back</button>
                    <button id="cpStartBtn"
                        style="padding: 10px 30px; background: #2E8B57; border: none; color: white; border-radius: 5px; cursor: pointer; font-weight: bold; font-size: 1.1em;">Start
                        Adventure</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Level Up Screen -->
    <div id="levelUpScreen"
        style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 20; flex-direction: column; align-items: center; justify-content: center; color: white;">
        <h1>Level Up!</h1>
        <h3>Choose an Upgrade</h3>
        <div id="upgradeCards" style="display: flex; gap: 20px; margin-top: 20px;">
            <!-- Cards injected by JS -->
        </div>
    </div>

    <!-- Game HUD -->
    <div id="gameHUD"
        style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 10;">
        <!-- Stats Panel -->
        <div id="statsPanel"
            style="position: absolute; top: 20px; left: 20px; background: rgba(0,0,0,0.8); padding: 15px; border-radius: 8px; color: white; border: 2px solid #555; pointer-events: none; min-width: 180px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">

            <h3
                style="margin: 0 0 10px 0; color: gold; border-bottom: 1px solid #444; padding-bottom: 5px; text-align: center;">
                Hero Stats</h3>

            <!-- Level Info -->
            <div style="margin-bottom: 10px; text-align: center;">
                <span style="color: #aaa;">Level </span><span id="hudLevel"
                    style="color: cyan; font-weight: bold; font-size: 1.2em;">1</span>
            </div>

            <div style="font-size: 0.85em; line-height: 1.5;">
                <!-- Common (White) -->
                <div style="color: #ddd; margin-bottom: 5px;">
                    <div>HP: <span id="hudHp" style="color: #f66; float: right;">100/100</span></div>
                    <div>Damage: <span id="hudAtk" style="color: white; float: right;">10</span></div>
                    <div>Defense: <span id="hudDef" style="color: white; float: right;">0</span></div>
                    <div>Move Spd: <span id="hudSpd" style="color: white; float: right;">5</span></div>
                </div>

                <hr style="border-color: #333; margin: 5px 0;">

                <!-- Uncommon (Green) -->
                <div style="color: #8f8; margin-bottom: 5px;">
                    <div>Atk Spd: <span id="hudAtkSpd" style="float: right;">0.5s</span></div>
                    <div>Range: <span id="hudRange" style="float: right;">150</span></div>
                    <div>Proj Spd: <span id="hudProjSpd" style="float: right;">12</span></div>
                    <div>Crit Rate: <span id="hudCritRate" style="float: right; color: #fff;">5%</span></div>
                    <div>Crit Dmg: <span id="hudCritDmg" style="float: right; color: #fff;">150%</span></div>
                </div>

                <hr style="border-color: #333; margin: 5px 0;">

                <!-- Rare (Purple/Gold) -->
                <div style="color: #b388ff;">
                    <div>Multishot: <span id="hudMulti" style="color: gold; float: right;">1</span></div>
                    <div>Pierce: <span id="hudPierce" style="color: gold; float: right;">No</span></div>
                    <div>AOE: <span id="hudAOE" style="color: gold; float: right;">0</span></div>
                    <div>Knockback: <span id="hudKB" style="color: gold; float: right;">0</span></div>
                    <div>Slow: <span id="hudSlow" style="color: gold; float: right;">No</span></div>
                    <div>Freeze: <span id="hudFreeze" style="color: gold; float: right;">No</span></div>
                    <div>Regen: <span id="hudRegen" style="color: #8f8; float: right;">0/s</span></div>
                    <div>LoK: <span id="hudLoK" style="color: #8f8; float: right;">0</span></div>
                    <div>Ricochet: <span id="hudRicochet" style="color: #FF1493; float: right;">0</span></div>
                    <div>Ex. Strikes: <span id="hudDbl" style="color: #FF8C00; float: right;">0</span></div>
                </div>
            </div>
        </div>

        <!-- Pause Button -->
        <button id="btnPause"
            style="position: absolute; top: 20px; right: 20px; width: 50px; height: 50px; background: rgba(0,0,0,0.6); border: 2px solid #666; color: white; border-radius: 8px; font-size: 24px; cursor: pointer; pointer-events: auto;">
            ‚è∏
        </button>

        <!-- Pause Menu Overlay -->
        <div id="pauseMenu"
            style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); flex-direction: column; align-items: center; justify-content: center; z-index: 100; pointer-events: auto;">
            <h1 style="color: white; font-size: 4em; margin-bottom: 40px; text-shadow: 0 0 10px #000;">PAUSED</h1>

            <button id="btnResume"
                style="padding: 15px 40px; font-size: 1.5em; background: #2E8B57; color: white; border: 2px solid #4CAF50; border-radius: 8px; cursor: pointer; margin-bottom: 20px; width: 300px;">
                Continue
            </button>

            <button id="btnForfeit"
                style="padding: 15px 40px; font-size: 1.5em; background: #800; color: white; border: 2px solid #a00; border-radius: 8px; cursor: pointer; width: 300px;">
                Give Up / End Run
            </button>
        </div>

        <!-- XP Bar -->
        <div id="xpBarContainer"
            style="position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); width: 60%; height: 20px; background: #222; border: 2px solid #555; border-radius: 10px; overflow: hidden; pointer-events: auto;">
            <div id="xpBarFill"
                style="width: 0%; height: 100%; background: linear-gradient(90deg, #66f, #a0a0ff); transition: width 0.2s;">
            </div>
            <div id="xpText"
                style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; font-size: 0.8em; color: white; text-shadow: 1px 1px 2px black;">
                0 / 100 XP</div>
        </div>
    </div>

    <!-- Game Over Screen -->
    <div id="gameOverScreen"
        style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(rgba(0,0,0,0.9), #200); z-index: 30; flex-direction: column; align-items: center; justify-content: center; color: white; font-family: monospace;">
        <h1 style="color: red; font-size: 5em; margin-bottom: 20px; text-shadow: 0 0 10px black;">YOU DIED</h1>

        <div
            style="background: rgba(0,0,0,0.8); padding: 30px; border-radius: 15px; border: 2px solid #555; width: 700px;">

            <!-- Hero Header -->
            <div
                style="display: flex; align-items: center; margin-bottom: 30px; border-bottom: 1px solid #444; padding-bottom: 15px;">
                <div id="goClassIcon" style="width: 80px; height: 80px; margin-right: 20px;"></div>
                <div>
                    <h2 id="goClassName" style="margin: 0; color: white; font-size: 2.5em;">Warrior</h2>
                    <div style="font-size: 1.2em; color: #aaa;">Level <span id="goLevel" style="color: cyan;">1</span>
                    </div>
                </div>
                <div style="margin-left: auto; text-align: right;">
                    <div style="font-size: 1.0em; color: #999;">Time Alive</div>
                    <div id="goTime" style="color: gold; font-size: 2em;">00:00</div>
                </div>
            </div>

            <!-- Stats Grid -->
            <div id="goFinalStats"
                style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 30px; font-size: 1.2em; color: #ddd;">
                <!-- Stats injected by JS -->
            </div>

            <hr style="border-color: #333; margin: 20px 0;">

            <h3 style="margin-bottom: 15px; color: #aaa; font-size: 1.5em;">Upgrades</h3>
            <div id="goUpgrades" style="display: flex; gap: 10px; flex-wrap: wrap; justify-content: center;">
                <!-- Upgrades List -->
            </div>
        </div>

        <button onclick="location.reload()"
            style="margin-top: 40px; padding: 20px 50px; font-size: 1.5em; background: #800; color: white; border: none; cursor: pointer; border-radius: 8px; font-weight: bold; border: 2px solid #a00;">Return
            to Menu</button>
    </div>
    <canvas id="gameCanvas" width="800" height="600"></canvas>
    <script type="module" src="js/game.js"></script>
</body>

</html>